---

nodes:
  - name: winsql1
    role: sql_server
    app_name: music_store_demo
    instance_type: t2.large
    image: "{{ win2016_ami_id|default('ami-050202fb72f001b47') }}" #windows 2016
    volumes:
      - device_name: /dev/xvda
        volume_type: gp2
        volume_size: 50
        delete_on_termination: true
    user_data: "{{ lookup('template', 'templates/userdata.txt.j2') }}"
  - name: winweb1
    role: iis
    app_name: music_store_demo
    instance_type: t2.large
    image: "{{ win2016_ami_id|default('ami-050202fb72f001b47') }}" #windows 2016
    volumes:
      - device_name: /dev/xvda
        volume_type: gp2
        volume_size: 50
        delete_on_termination: true
    user_data: "{{ lookup('template', 'templates/userdata.txt.j2') }}"
  - name: winweb2
    role: iis
    app_name: music_store_demo
    instance_type: t2.large
    image: "{{ win2016_ami_id|default('ami-050202fb72f001b47') }}" #windows 2016
    volumes:
      - device_name: /dev/xvda
        volume_type: gp2
        volume_size: 50
        delete_on_termination: true
    user_data: "{{ lookup('template', 'templates/userdata.txt.j2') }}"
  - name: winweb3
    role: iis
    app_name: music_store_demo
    instance_type: t2.large
    image: "{{ win2016_ami_id|default('ami-050202fb72f001b47') }}" #windows 2016
    volumes:
      - device_name: /dev/xvda
        volume_type: gp2
        volume_size: 50
        delete_on_termination: true
    user_data: "{{ lookup('template', 'templates/userdata.txt.j2') }}"